---
# Source: demo/templates/pod.yaml
apiVersion: v1
kind: Pod
metadata:
  name: release-name-nginx
spec:
  containers:
    - name: nginx
      image: nginx:1.14.2
      ports:
        - containerPort: 80
---
# Source: demo/templates/tests/test-connection.yaml
kind: ConfigMap
apiVersion: v1
metadata:
  name: release-name-helm-values-validator
  annotations:
    "helm.sh/hook": "pre-install,pre-upgrade"
data:
  schema.json: |
    {
      "type": "object",
      "properties": {
        "lines": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "country": {
          "type": "string",
          "pattern" : "^[A-z]*$"
        }
      },
      "required": ["lines"]
    }
    
  values.json: |
    {"country":"1France","line":["zaeeae"]}
---
# Source: demo/templates/tests/test-connection.yaml
apiVersion: v1
kind: Pod
metadata:
  name: "release-name-helm-values-validator"
  annotations:
    "helm.sh/hook": "pre-install,pre-upgrade"
spec:
  containers:
    - name: helm-values-validator
      image: franckrst/helm-values-validator:0.0.0-alpha
      env:
        - name: VALUES_FILE
          value: /values.json
        - name: SCHEMA_FILE
          value: /schema.json
      volumeMounts:
        - mountPath: /values.json
          subPath: values.json
          name: files
        - mountPath: /schema.json
          subPath: schema.json
          name: files
  volumes:
    - name: files
      configMap:
        name: release-name-helm-values-validator
  restartPolicy: Never
